# Отчет по лабораторной работе
## по курсу "Искусственный интеллект"

### Студенты: 

| ФИО       | Роль в проекте                     | Оценка       |
|-----------|------------------------------------|--------------|
| Петросян В.А. |Описание общей схемы предметной области, механизм задания вопросов, заполнение базы данных. |        |
| Лунгу Н.А. | Тестирование, эксперт и консультант в языке SWI Prolog, механизм задания вопросов, заполнение базы данных. |       |
| Ногаев Д.Т.| Инженер по знаниям, механизм вывода, заполнение базы данных..|      |
| Хасанов А.Р.   |Написание отчёта, механизм обработки ответов, заполнение базы данных. |         |

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |     27.05.2020         |      4         |

> *К сожалению, несмотря на испытанную вами боль, полученный результат имеет мало общего с экспертными системами, поскольку представление знаний в нём представляет из себя таблицу, и реализовать такую же логику на Python было бы проще. Prolog хорошо для моделирования рассуждений, а для этого нужны правила и нелинейный процесс принятия решений, неалгоритмический, управляемый данными. В вашем случае такого не наблюдается.*

## Тема работы

 Изначально наша команда думала над реализацией экспертной системы шахматных дебютов, но мы почти сразу от неё отказались, так как было бы сложно хорошо продумать и написать это. Потом мы подумали над идеей рекомендовать пользователю торты. Он должен отвечать на некоторые вопросы (причина выбора торта, состояние здоровья, тип коржа, тип крема), и в результате, на основе его ответов, экспертная система рекомендует пользователю торт.
## Концептуализация предметной области

Результаты концептуализации предметной области:
 - выделенные понятия: Название торта, причина выбора торта, по состоянию здоровья, крем, тип коржа
 - тип получившейся онтологии - иерархическое.
 -(название торта, причина выбора торта, состояние здоровья, тип коржа, крема) - статические знания
 - каждый участник занимался поиском информации о тортах и его ингредиентах.
   Каждый участник в равной степени провел исследовательскую работу над тортами, для того чтобы определить их рецепт и полученную информацию преобразовать в предикат.
 
 
Приведите графические иллюстрации:

![Image description](https://github.com/MAILabs-Edu-AI/lab-expert-system-next-level/blob/master/Scheme.png)

## Принцип реализации системы
Для решения поставленной задачи используется система программирования SWI Prolog. У нас есть  база данных тортов. Пользователю рекомендуется название торта, исходя из его предпочтений, которые мы узнаём путем ответа пользователя на некоторые вопросы. Например, по какой причине пользователь хочет выбрать торт (день рождения, свадьба, подарок, торт на каждый день), указать состояние здоровья(аллергик, диабетик), какой крем хочет пользователь (шоколадный,ванильный, сметанный), какой тип коржа хочет пользователь (бисквит,песочное тесто, сахарное тесто). Далее ответы обрабатываются, и в результате отсекаются некоторые ветки решения.
## Механизм вывода

При запуске программы пользователю выпадает меню с вариантами ответа. 

       menu([], _).
       menu([First|Rest], Index) :-
       	IndexForPrinting is Index + 1,
       	write(IndexForPrinting), write(") "), answer(First), nl,
       	NextIndex is Index + 1,
       	menu(Rest, NextIndex).

Первый аргумент - список вариантов ответа
Второй - индекс выводимого элемента

Ответы пользователя затем с помощью предиката `asserta` заносятся в базу ответов пользователя

Само меню вызывается из предиката `ask_and_save`

    ask_and_save(Question, Answer, Choices) :-
    	question(Question),%печать вопроса
    	menu(Choices, 0),
    	read(ReadIndex),
    	Index is ReadIndex - 1,
    	get_element_at_index(Index, Choices, Response),
    	asserta(choice(Question, Response)),
    	Response = Answer.

Первый аргумент - вопрос для пользователя
Второй аргумент - возможный ответ (характеристика торта, который рассматривается в данный момент программой)
Третий аргумент - список возможных ответов

## Извлечение знаний и база знаний

Данные из списка возможных ответов извлекались с помощью предиката  `get_element_at_index/3`

    get_element_at_index(0, [First|_], First).
    get_element_at_index(Index, [_|Rest], Response) :-
    Index > 0,
    NextIndex is Index - 1,
    get_element_at_index(NextIndex, Rest, Response).

Предикат возвращает элемент списка с заданным индексом.
## Протокол работы системы

Приведите несколько примеров работы системы, проиллюстрируйте их фрагментами деревьев вывода.

1

    ?- main().
    Choose reason
    1) Birth day
    2) Wedding day
    3) On every day
    4) Gift
    |: 1.
    Choose for health reasons
    1) Allergy
    2) Diabetic
    3) No matter
    |: 3.
    Choose cream type
    1) Chocolate cream
    2) Vanilla cream
    3) Sour cream
    |: 2.
    choice cake layers type
    1) Air biscuit
    2) Shortbread dough
    3) Choux dough
    4) Sugar dough
    |: 4.
    Caprese
    true.
2

    ?- main().
    Choose reason
    1) Birth day
    2) Wedding day
    3) On every day
    4) Gift
    |: 4.
    Choose for health reasons
    1) Allergy
    2) Diabetic
    3) No matter
    |: 2.
    Choose cream type
    1) Chocolate cream
    2) Vanilla cream
    3) Sour cream
    |: 2.
    choice cake layers type
    1) Air biscuit
    2) Shortbread dough
    3) Choux dough
    4) Sugar dough
    |: 1.
    Corn
    true.

## Выводы

Экспертная система - это компьютерная программа, которая в некоторой области проявляет степень познаний сравнимую с работой человека-эксперта. Это очень удобно, ведь порой всем нам не нравится разговаривать с консультантами в магазине.
Данная лабораторная работа помогла освежить знания курса Логическое программирование, а также причинила всем участникам проекта не мало страданий. Не стоит обделять вниманием и "шарм" процесса заполнения базы данных. 

Весь этап разработки мы взаимодействовали в команде. Для ускорения процесса разработки мы несколько раз встречались дискорде, а также освоили технологию совместного редактирования кода в Visual Studio Code. Мы очень долго и тщательно прорабатывали тему и концепцию нашей эксппертной системы. К сожалению, в виду недостака знаний/опыта в языке Prolog не получилось реализовать изначальные идеи полностью, но всё же нам удалось выполнить задание удовлетворяющее поставленным задачам. 

P.S. Когда на лекции Вы сказали, что эта лабораторная работа нужна чтобы мы почувствовали  всю боль и сложность процесса разработки экспертных систем, мы восприняли эту информацию как гиперболу и возможную шутку.
Так вот, после выполнения лаборатороной работы призма шутки была разбита об стену пролога, боли и реальности.
